title: 构建hexo+github博客
date: 2016-12-02 22:44:12
tags:
- hexo
- github
categories:
- node
---

一直以来很想将{% link chongblog http://www.chongblog.com chongblog %}
转移到github静态页面上，因为wordpress的富文本编辑器不太喜欢，还是喜欢在sublime的敲。今天闲下来心一横就开始了
## 前言
{% blockquote %}
点击全文查看吧
{% endblockquote %}
<!-- more -->

## 1.配置环境
### 1.1 node
这个不用多说了，本来hexo就是基于nodejs的，而且现在每个程序员的电脑都有这么个东西，略过
### 1.2 git
git是开源的分布式版本控制系统，刚知道这东西的时候感觉老复杂了，当然现在依然没怎么学会，因为在我自己的公司就我一个前端，基本没用这个玩意来进行生产，我只是拿来推送与管理自己的github，目前只是学会用，而且也没用命令行的东西，用sourceTree界面管理工具
git在hexo的作用也是把本地的hexo内容提交到github上去.
### 1.3 github账户
这个不用多说了，没有账户的人应该也会去找一些自己想要的东西或者是去阅读一些牛人的代码，我用最多的就是找牛逼的代码，自己能用的拿来用，用不到的就阅读下牛人怎么写的代码，这有机会再展开说。
## 2.安装与配置Hexo 
### 2.1 安装hexo
{% codeblock %}
	$ cnpm install -g hexo
{% endcodeblock%}
cnpm是国内的淘宝镜像，把hexo安装到全局(-g);
测试是否安装成功
{% codeblock %}
  	$ hexo -version 
{% endcodeblock%}
如果安装成功会显示如下版本信息
{% img /images/hexo-version.png 400 600 hexo -version  %}
安装成功之后就可以用Hexo创建项目
{% codeblock %}
	$ hexo init blog
{% endcodeblock%}
其中 hexo init 是启动创建项目的意思 blog为项目名称
安装完成之后 进入目录
{% codeblock %}
	$ cd blog 
{% endcodeblock%}
hexo g 是生成静态文件 (hexo generate的缩写)
{% codeblock %}
	$ hexo g
{% endcodeblock%}
本地启动 hexo s 是 hexo server 的缩写
{% codeblock %}
	$ hexo s 
{% endcodeblock%}
浏览器输入 http://localhost:4000 就可以看到我们刚创建的blog项目了
### 2.2 配置hexo
配置hexo主要由三个配置
1.全局配置
2.安装主题并进行配置 
3.部署到github上
#### 2.2.1 全局配置
_config.yml是全局的配置文件：很多的网站配置都在这个文件中定义。
{% codeblock%}
	站点信息: 定义标题，作者，语言
	URL: URL访问路径
	文件目录: 正文的存储目录
	写博客配置：文章标题，文章类型，外部链接等
	目录和标签：默认分类，分类图，标签图
	归档设置：归档的类型
	服务器设置：IP，访问端口，日志输出
	时间和日期格式： 时间显示格式，日期显示格式
	分页设置：每页显示数量
	评论：外挂的Disqus评论系统
	插件和皮肤：换皮肤，安装插件
	Markdown语言：markdown的标准
	CSS的stylus格式：是否允许压缩
	部署配置：github发布
{% endcodeblock%}
查看文件：_config.yml
{% codeblock%}
	# Hexo Configuration
	## Docs: https://hexo.io/docs/configuration.html
	## Source: https://github.com/hexojs/hexo/

	# 网站设置
	title: 苟且
	subtitle: 敬畏技术、拓展知识、见微知著
	description: Jser\nodejs\C\Python\知名扯淡专家\资深渣渣前端er
	author: 假装正在输入
	language: zh-Hans
	timezone:

	# 设置url
	## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'
	url: http://new.chongblog.com/
	root: /
	permalink: :year/:month/:day/:title/
	permalink_defaults:

	# 文件目录设置
	source_dir: source
	public_dir: public
	tag_dir: tags
	archive_dir: archives
	category_dir: categories
	code_dir: downloads/code
	i18n_dir: :lang
	skip_render:

	# 博客配置
	new_post_name: :title.md # File name of new posts
	default_layout: post
	titlecase: false # Transform title into titlecase
	external_link: true # Open external links in new tab
	filename_case: 0
	render_drafts: false
	post_asset_folder: false
	relative_link: false
	future: true
	highlight:
	  enable: true
	  line_number: true
	  auto_detect: false
	  tab_replace:

	# 标签与归档设置
	default_category: uncategorized
	category_map:
	tag_map:

	# 时间与格式设置
	## Hexo uses Moment.js to parse and display date
	## You can customize the date format as defined in
	## http://momentjs.com/docs/#/displaying/format/
	date_format: YYYY-MM-DD
	time_format: HH:mm:ss

	# 分页设置
	## Set per_page to 0 to disable pagination
	per_page: 5
	pagination_dir: page

	# 插件和皮肤设置
	## Plugins: https://hexo.io/plugins/
	## Themes: https://hexo.io/themes/
	theme: next

	# github部署设置
	## Docs: https://hexo.io/docs/deployment.html
	deploy:
	  type: git
	  repo: http://github.com/chong0808/hexo-blog.git
	  branch: master
{% endcodeblock%}	
### 2.2.2 安装主题并进行配置 
安装主题的话现在github一搜有一堆免费试用的主题
下载好主题文件之后放到
	F:\hexo-blog\blog\themes
文件中
然后在全局配置文件_config.yml修改theme值，将值与主题文件包设置一样名字{% link next主题官网 http://theme-next.iissnan.com/ next主题官网 %}
	# 插件和皮肤设置
	## Plugins: https://hexo.io/plugins/
	## Themes: https://hexo.io/themes/
	theme: next
打开F:\hexo-blog\blog\themes\next文件找到_config.yml根据官方文档进行主题设置
再次静态化打包，本地发布
{% codeblock %}
	$ hexo g
	$ hexo s
{% endcodeblock%}
浏览器输入 http://localhost:4000 就能预览项目了
### 2.2.3 部署到github上
在github中创建一个项目hexo-blog
编辑全局配置文件：_config.yml，找到deploy的部分，设置github的项目地址。
{% codeblock %}
	# github部署设置
	## Docs: https://hexo.io/docs/deployment.html
	deploy:
	  type: git
	  repo: http://github.com/chong0808/hexo-blog.git
	  branch: master
{% endcodeblock%}
然后，通过命令进行部署。
{% codeblock %}
	$ hexo deploy
{% endcodeblock%}
静态的web网站就被部署到了github
在这个过程中遇到了问题 报错
	error ：deploy not found git
此时需要的是在终端输入
	$  cnpm install hexo-deployer-git --save
在发布，发布期间会比较慢
发布完成之后回到github上
在setting中的GitHub Pages选项中的
{% img /images/github-pages.png 400 600 github-pages  %}
设置成master branch选项
在浏览器中打开https://chong0808.github.io/hexo-blog/ 
{% img /images/home.png 400 600 home  %}
样式错乱css和js的加载路径不对
接下来，配置好域名，这个路径就会正确的
### 2.2.4 配置域名
#### 主域名绑定
在dnspod控制台，设置主机记录@，类型A，到IP 192.30.252.153。
大概等几分钟会生效。判断生效，对域名执行ping或者dig命令。
在github项目中，新建一个文件CNAME，文件中写出你要绑定的域名http://new.chongblog.com/。
通过浏览器，访问www.new.chongblog.com，就打开了我们建好的博客站点。