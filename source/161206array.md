title: 重读语言精粹---数组
date: 2016-12-06 18:44:12
permalink: array161206
tags:
- JavaScript
- Array
categories:
- js基础

---

{% blockquote %}
数组是一段线性分配的内存，他通过整数计算偏移并访问其中的元素。
纪念一次，读书不认真的错误。。。12、06
{% endblockquote %}
<!-- more -->
## javascript数组存在的形式
数组是一个性能出色的数据结构，在程序中使用数组，可让一批想同类型的变量使用同一个数组变量名，用下标来区分。他的优点是表达简洁，可读性好，便于循环结构。
但是js没有真正的数组数据结构，他只有类似数组的对象
在语言精粹中是这样说的
{% blockquote %}
 JavaScript提供了一种拥有类数组特性的对象。他把数组的下标转变成字符串，用其作为属性。
{% endblockquote %}
就是说，js的数组实质是讲下标变成字符串，然后把字符串用作属性，一个具有整数作为属性的一种特殊对象，这种特殊对象的特殊之处在于他拥有很多数组才具有的内置方法。比如length、splice、slice、pop、push、unshift、shift等等，还具有迭代的特性，比如map，reduce等等
下面俩者产生的结构是一样的
{% codeblock %}
var arr1 = ['a','b','c','d','e'];
var arr2 = {
	'0':'a',
	'1':'b',
	'2':'c',
	'3':'d',
	'4':'e'
};
console.log(arr1[0]) // 输出 a
console.log(arr2[0]) // 输出 a
console.log(Array.isArray(arr1)) // 输出true
console.log(Array.isArray(arr2)) // 输出false
console.log(typeof arr1) // 输出object
console.log(typeof arr2) // 输出object
{% endcodeblock %}
但是arr1具有很多内置的方法arr2是不具有的;arr1继承Array.prototype,arr2继承子Object.prototype;
在强类型语言中，数组中的元素都是要求相同类型的，但是在js中数组可以使用多种类型混合使用，json数据的存在，也是基于这个怪异的模型。
## 创建数组
{% codeblock %}
var arr3 = [];
var arr4 = new Array();
{% endcodeblock %}
每个js数组都有长度，而且这个长度是没有上界的，也就是说length的是动态改变的，在初始化数组的时候可以不指定长度，就算指定了长度也可以对数组进行扩大length属性，可以通过数组元素的变化来动态变化length;
设置更大的length不会分配更多的内存空间，但是将length的值设小，会将索引超出length值得元素给删除掉；
{% codeblock %}
var arr5 = ['a','b','c','d','e'];
console.log(arr5)   //输出 ['a','b','c','d','e']
console.log(arr5.length)  //输出5
arr5.length = 3;
console.log(arr5)  //输出 ['a','b','c']
{% endcodeblock %}
## 删除数组
js中数组就是一个特殊的对象，所以删除数组就是删除对象
{% codeblock %}
 delete arr5  
 console.log(arr5)  // 输出undefine
{% endcodeblock %}
 
## 可枚举
在js中对象都具有可枚举的属性，那么数组也是一个特殊的对象，那么数组也可以通过for in来进行遍历。但是输出的是无法保证属性的顺序，可用for循环来遍历数组
{% codeblock %}
var arr6 = ['a','b','c','d','e'];
for(let i = 0, len = arr6.length;i<len;i++){
console.log(arr6[i])  // 输出 'a','b','c','d','e'
 }
{% endcodeblock %}
## 检测数组对象typeof 报错误类型
由于js中数组是一个特殊的对象，所以用typeof对数组进行检测会得到一个object，
可用Array.isArray(arr)方法来进行检测
{% codeblock %}
var arr7 = ['a','b','c','d','e'];
console.log(Array.isArray(arr7))  //输出true
{% endcodeblock %}

## 数组方法
js提供了一套数组方法都内置到Array的原型链上，所以任何数组都可以通过原型链查找的形式找到数组的方法进而使用该方法，
js的数组方法有几个分类，一个是可迭代与不可迭代的，
不可迭代：join、reverse、sort、concat、slice、splice、unshift、shift、toString、toLowerString
可迭代：forEach、map、filter、every、some、reduce

### 添加数组方法
添加数组方法是直接通过添加到Array的原型链上的（不推荐该方法，容易引发错误）
