title: 模块化与组件化的浅见
date: 2016-12-10 10:44:12
permalink: reqandcomp
tags:
- 模块化
- 组件化
categories:
- 前端
---
模块化与组件化开发，是前端工程化崛起的一种新的前端开发方式，最近一俩年讨论最多的前端开发方式，合理的运用模块化与组件化开发能确保开发出可复用、可维护的软件代码。
<!-- more -->
## 模块化
每个开发者对模块化的定义都差不多一样，看过很多资料，说法千万种，但是最终的思想都是差不多，都是离不开抽象、抽离出底层的实现，然后把他独立封装起来，暴露出特定的接口，高级一点的模块化就是将功能封装成一个黑盒，只管接口，不管里面是怎么实现的。
对于前端开发来说，模块化最初的就是将功能封装，不断的封装，复用，再复用，这时候requirejs、commonjs出现了
随着web技术的发展仅仅实现功能的抽离封装已经不能在满足项目的开发了，到后来又有了模块化加载，按需加载，就是用到的时候才加载进来，不用的时候不加载，再优化应用方面减少了http请求，这时候seajs出现了。
{% blockquote %}
RequireJS的目标是鼓励代码的模块化，它使用了不同于传统script标签的脚本加载步骤。可以用它来加速、优化代码，但其主要目的还是为了代码的模块化。它鼓励在使用脚本时以module ID替代URL地址。
{% endblockquote %}
## 组件化
组件化的按照业务逻辑进行划分，将应用分出一个个模块，实现更好的协同开发与开发出更具维护性的应用，降低没个功能组件的耦合度，在后期维护实现快速定位或者扩展功能的时候更加方便。
组件化最大的好处是实现了可复用，一次深度开发之后，可以在之后或者其他地方实现复用，满足更多的业务场景需求的时候能很快的进行二次开发实现出来，组件之间最大的难点是如何降低耦合度。
## 如何正确的划分组件跟模块
组件式的开发最大的要求就是降低耦合度，实现复用（在我的开发的过程中）,特别是系统软件的开发，功能都是相似的，但是这是使用的场景不同
### 按功能区划分组件
正在进行中一个项目中，下拉选择是一个经常要复用的地方，那么久可以把他抽离出来，当做一个组件
{% img /images/121011.png 1200 600 图片 %}
{% img /images/121005.png 1200 600 图片 %}
在之前项目中有很多下拉的选择框，但是数据跟样式跟选择回调是不同的
{% img /images/121005.png 1200 600 图片 %}

这样一个下拉的组件虽然很小，但是一旦抽离出来可以进行很好的复用，无论在以后的项目还是在这次项目中，都能快速的复用，
如何进行设计接口，下拉的组件通常是三个接口
1.接受数据
2.点击选择接收回调函数
3.改变样式
这三个接口要怎么设计，而且还要考虑以后如何去再去扩展，从这个三个方面下手设计
看下面的图片中的优惠券折扣卡区域
{% img /images/121004.png 1200 600 图片 %}
这个里面的优惠券跟折扣卡都是一样的，只是接收的数据不一样，而且工能都是只能选择一张，这可以设计一个类
{% codeblock %}
function Card(data){
 this.data = data;
}
//初始化的方法
Card.prototype.init = function(){}
Card.prototype.changeStyle = function(){}
...
Card.prototype.method = function(){};

//生成优惠券 
new Card(data);
//生成折扣卡
new Card(data);
//生成积分卡
new Card(data);
{% endcodeblock %}
当然这是以前的工作方式了，现在引入angularjs之后完全不用这样了，写好样式之后，接收数据进行循环产生就可以了··现在的前端框架很大程度上解决了组件化开发的方案，低级一点的基本上不用自己写接口，直接写个指令就可以;而且一般也是够用了。
### 按场景区划分组件
按场景来区分的好用就是场景复用
{% img /images/121001.png 1200 600 图片 %}
{% img /images/121002.png 1200 600 图片 %}
上面的新增项目跟选择优惠是在预诊更跟费用划价都会用到的，而且都是一样的，只是接受的数据不一样，
那么可以把这俩个东西当做一个组件
那么设计的时候只要接受数据接口跟返回数据接口的方法就可以
点击弹出的时候可以接收项目的数据，之后确定关闭之后接收一个返回数据给上一个场景就可以，
这样做的好处就是，无论怎么扩展，最后组件与组件之间的关联都是在数据上的耦合。
### 模块划分
模块的划分有俩种
1.是方法函数，比如经常用到的方法可以抽离，
最常用的事件方法跟对象引用方法，这些底层功能方法函数，可以抽离
{% codeblock %}
(function unit(){
 
 function _extend(obj1,obj2){
  var obj = obj1 || {};
  if(obj2 && typeof obj2 =='object'){
   for(key in obj2){
   	obj[key] = obj2[key]
   }
  }
  return obj
 }
 return {
  extend:_extend
 }
})()
{% endcodeblock %}
2.是应用模块
{% img /images/121012.png 1200 600 图片 %}
在之前的项目或者现在的项目都是按应用的功能区划分的模块，上面图片中的可以首先分出预约，患者，收费，统计，库存，设置
这几个是大的模块，在每个大模块里面又能划分出小的模块出来，在患者这个模块中，又能划分基本信息、患者病历、缴费记录、影象信息、预约记录、回访信息、外加工。
这里的模块划分充分的体现的大型应用之间的构建，模块开发与按需加载很是需要用到，也很适合用angularjs构建单页面应用开发，每个模块根据路由划分，然后模块与模块之间的通讯基本可以用广播来实现，这样极大的方便了开发。
### 总结
模块化与组件式的开发追求的最终目的就是方便开发，减少开发难度，加强团队协作开发，分工合作，各司其职，降低后期的维护难度，增强后期的可维护性。

